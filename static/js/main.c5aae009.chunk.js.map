{"version":3,"sources":["store/stopwatch-store.js","components/reset-button/reset-button.js","components/start-button/start-button.js","hooks/hooks.js","components/wait-button/wait-button.js","components/watch/watch.js","App.js","index.js"],"names":["subject","Subject","initialState","value","firstClick","run","state","stopwatchStore","init","next","subscribe","setState","runTimer","stopTimer","resetTimer","changeTimer","onFirstClick","window","setTimeout","ResetButton","type","className","onClick","StartButton","useObservables","store","useState","chatState","setChatState","useLayoutEffect","subs","unsubscribe","WaitButton","Watch","useEffect","timerInterval","setInterval","clearInterval","hours","addZero","minutes","seconds","App","Number","prototype","this","toString","padStart","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iNAEMA,EAAU,I,MAAIC,GACdC,EAAe,CACnBC,MAAO,EACPC,YAAY,EACZC,KAAK,GAGHC,EAAQJ,EAwDGK,EAtDQ,CACrBC,KAAM,WACJF,EAAK,eAAQA,GACbN,EAAQS,KAAKH,IAEfI,UAAW,SAACC,GAAD,OAAcX,EAAQU,UAAUC,IAE3CC,SAAU,WACRN,EAAK,2BACAA,GADA,IAEHD,KAAK,IAEPL,EAAQS,KAAKH,IAEfO,UAAW,WACTP,EAAK,2BACAA,GADA,IAEHD,KAAK,IAEPL,EAAQS,KAAKH,IAEfQ,WAAY,WACVR,EAAK,2BACAA,GADA,IAEHH,MAAO,EACPE,KAAK,IAEPL,EAAQS,KAAKH,IAEfS,YAAa,WACXT,EAAK,2BACAA,GADA,IAEHH,MAAOG,EAAMH,MAAQ,IAEvBH,EAAQS,KAAKH,IAEfU,aAAc,WACZV,EAAK,2BACAA,GADA,IAEHF,YAAY,IAEdJ,EAAQS,KAAKH,GAEbW,OAAOC,YAAW,WAChBZ,EAAK,2BACAA,GADA,IAEHF,YAAY,IAEdJ,EAAQS,KAAKH,KACZ,MAELJ,gB,OCpDaiB,EARK,WAClB,OACE,wBAAQC,KAAK,SAASC,UAAU,iBAAiBC,QAAS,kBAAMf,EAAeO,cAA/E,oBCMWS,EARK,WAClB,OACE,wBAAQH,KAAK,SAASC,UAAU,kBAAkBC,QAAS,kBAAMf,EAAeK,YAAhF,oB,OCFSY,EAAiB,SAACC,GAC7B,MAAkCC,mBAASD,EAAMvB,cAAjD,mBAAOyB,EAAP,KAAkBC,EAAlB,KAOA,OANAC,2BAAgB,WACd,IAAMC,EAAOL,EAAMf,UAAUkB,GAG7B,OAFAH,EAAMjB,OAEC,kBAAMsB,EAAKC,iBACjB,CAACN,IACG,CAACE,ICWKK,EAlBI,WACjB,MAAoBR,EAAejB,GAA5BoB,EAAP,oBAUA,OACE,wBAAQP,KAAK,SAASC,UAAU,kBAAkBC,QAThC,WACdK,EAAUvB,WACZG,EAAeM,YAEfN,EAAeS,gBAKjB,mBCWWiB,EAtBD,WACZ,MAAoBT,EAAejB,GAA5BoB,EAAP,oBAEAO,qBAAU,WACR,IAAIC,EAAgB,KAQpB,OAPIR,EAAUtB,IACZ8B,EAAgBC,aAAY,WAC1B7B,EAAeQ,gBACd,KAEHsB,cAAcF,GAET,kBAAME,cAAcF,MAC1B,CAACR,EAAUtB,MAEd,IAAMiC,MAAYX,EAAUxB,MAAQ,OAAOoC,UACrCC,MAAeb,EAAUxB,MAAQ,GAAM,KAAKoC,UAC5CE,GAAWd,EAAUxB,MAAQ,IAAIoC,UAEvC,OAAO,uCAAQD,EAAR,YAAiBE,EAAjB,YAA4BC,MCFtBC,MAlBf,WACE,OACE,qCACE,wBAAQrB,UAAU,SAAlB,SACE,6CAEF,iCACE,cAAC,EAAD,IACA,sBAAKA,UAAU,YAAf,UACE,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAAC,EAAD,cCPVsB,OAAOC,UAAUL,QAAU,WACzB,OAAOM,KAAKC,WAAWC,SAAS,EAAG,IAGrCC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.c5aae009.chunk.js","sourcesContent":["import { Subject } from 'rxjs';\r\n\r\nconst subject = new Subject();\r\nconst initialState = {\r\n  value: 0,\r\n  firstClick: false,\r\n  run: false,\r\n};\r\n\r\nlet state = initialState;\r\n\r\nconst stopwatchStore = {\r\n  init: () => {\r\n    state = { ...state };\r\n    subject.next(state);\r\n  },\r\n  subscribe: (setState) => subject.subscribe(setState),\r\n\r\n  runTimer: () => {\r\n    state = {\r\n      ...state,\r\n      run: true,\r\n    };\r\n    subject.next(state);\r\n  },\r\n  stopTimer: () => {\r\n    state = {\r\n      ...state,\r\n      run: false,\r\n    };\r\n    subject.next(state);\r\n  },\r\n  resetTimer: () => {\r\n    state = {\r\n      ...state,\r\n      value: 0,\r\n      run: true,\r\n    };\r\n    subject.next(state);\r\n  },\r\n  changeTimer: () => {\r\n    state = {\r\n      ...state,\r\n      value: state.value + 1,\r\n    };\r\n    subject.next(state);\r\n  },\r\n  onFirstClick: () => {\r\n    state = {\r\n      ...state,\r\n      firstClick: true,\r\n    };\r\n    subject.next(state);\r\n\r\n    window.setTimeout(() => {\r\n      state = {\r\n        ...state,\r\n        firstClick: false,\r\n      };\r\n      subject.next(state);\r\n    }, 300);\r\n  },\r\n  initialState,\r\n};\r\n\r\nexport default stopwatchStore;\r\n","import { stopwatchStore } from '../../store';\r\n\r\nconst ResetButton = () => {\r\n  return (\r\n    <button type='button' className='btn btn-danger' onClick={() => stopwatchStore.resetTimer()}>\r\n      Reset\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ResetButton;\r\n","import { stopwatchStore } from '../../store';\r\n\r\nconst StartButton = () => {\r\n  return (\r\n    <button type='button' className='btn btn-success' onClick={() => stopwatchStore.runTimer()}>\r\n      Start\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default StartButton;\r\n","import { useLayoutEffect, useState } from 'react';\r\n\r\nexport const useObservables = (store) => {\r\n  const [chatState, setChatState] = useState(store.initialState);\r\n  useLayoutEffect(() => {\r\n    const subs = store.subscribe(setChatState);\r\n    store.init();\r\n\r\n    return () => subs.unsubscribe();\r\n  }, [store]);\r\n  return [chatState];\r\n};","import { useObservables } from \"../../hooks\";\r\nimport { stopwatchStore } from \"../../store\";\r\n\r\nconst WaitButton = () => {\r\n  const [chatState] = useObservables(stopwatchStore);\r\n\r\n  const onWaitTimer = () => {\r\n    if (chatState.firstClick) {\r\n      stopwatchStore.stopTimer();\r\n    } else {\r\n      stopwatchStore.onFirstClick();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button type='button' className='btn btn-warning' onClick={onWaitTimer}>\r\n      Wait\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default WaitButton;\r\n","import { useEffect } from 'react';\r\nimport { stopwatchStore } from '../../store';\r\nimport { useObservables } from '../../hooks';\r\n\r\nconst Watch = () => {\r\n  const [chatState] = useObservables(stopwatchStore);\r\n\r\n  useEffect(() => {\r\n    let timerInterval = null;\r\n    if (chatState.run) {\r\n      timerInterval = setInterval(() => {\r\n        stopwatchStore.changeTimer();\r\n      }, 1000);\r\n    } else {\r\n      clearInterval(timerInterval);\r\n    }\r\n    return () => clearInterval(timerInterval);\r\n  }, [chatState.run]);\r\n\r\n  const hours = (~~(chatState.value / 3600)).addZero();\r\n  const minutes = (~~((chatState.value / 60) % 60)).addZero();\r\n  const seconds = (chatState.value % 60).addZero();\r\n\r\n  return <h2>{`${hours}:${minutes}:${seconds}`}</h2>;\r\n};\r\n\r\nexport default Watch;\r\n","import './App.css';\nimport { ResetButton, StartButton, WaitButton, Watch } from './components';\n\nfunction App() {\n  return (\n    <>\n      <header className='header'>\n        <h1>Stopwatch</h1>\n      </header>\n      <main>\n        <Watch />\n        <div className='btn-group'>\n          <ResetButton />\n          <WaitButton />\n          <StartButton />\n        </div>\n      </main>\n    </>\n  );\n}\n\nexport default App;\n","/*eslint no-extend-native: [\"error\", { \"exceptions\": [\"Number\"] }]*/\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nNumber.prototype.addZero = function () {\n  return this.toString().padStart(2, 0);\n};\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}